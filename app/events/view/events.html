{% extends 'base.html' %}
{% block title %}Events Menu{% endblock %}
{% block header %}
  <h1>Events Menu</h1>
{% endblock %}

{% block page %}
<table class="table">
	<tr>
		<th>Name</th>
		<th>Start Time</th>
		<th>End Time</th>
	</tr>
	{% for entry in entries %}
	<tr>
		<td>{{ entry.name }}</td>
		<td>{{ entry.start }}</td>
		<td>{{ entry.end }}</td>
		<td><a class="btn btn-info" href="{{ url_for('events.show_info', id=entry.eventid) }}">Info</a></td>
		{% if 'admin' in current_user_roles() %}
		<td><a class="btn btn-info" href="{{ url_for('events.edit', id=entry.eventid) }}">Edit</a></td>
		{% endif %}
		{% if not entry.actual_end and ('admin' in current_user_roles() or entry.opener == current_user()['userid']) %}
		<td>
			<form method="post">
				<input type="hidden" name="eventid" value="{{ entry.eventid }}">
				<button type="submit" class="btn btn-success">Open</button>
			</form>
		</td>
		{% endif %}
	</tr>
	{% endfor %}
</table>
{% endblock %}